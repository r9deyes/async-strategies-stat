## Что исследуем?
Рассмотрим несколько стратегий работы с асинхронным подходом в python. Нас интересует оценка эффективности времени выполнения одной задачи из набора и времени выполнения всего набора задач в целом.

> Строго говоря, рассматриваемые стратегии лишь частные случаи использования механизма асинхронности в python. Это исследование не несет целью разработку наиболее эффективной стратегии, здесь только выясним какие из представленных стратегии показывают лучшие характеристики.

## Из чего состоит асинхронная стратегия
* Шаг(или await) - элементарный асинхронный этап выполнения задачи. Например, дождаться цены одного просканированного товара покупателя или дождаться следующего деления будильника.
* Задача(или task, coroutine) - Последовательный набор await-ов. На вход задаче подается один элемент бизнес-логики, результатом выполнения задачи этот объект будет обработан. Например, обслужить одного покупателя или дождаться один будильник. 
* Набор задач(tasks, coros) - несколько неупорядоченных задач, которые могут быть выполнены вместе в асинхронном режиме. Например, покупатели ожидающие обслуживания, или полка с будильниками.

### Выделим параметры
* await count. C<sub>A</sub>. Кол-ов await-ов в задаче. Для простоты предположим, что для определенного входного значения задачу можно разбить на определенное кол-во шагов или это кол-во можно оценить. 
* coros count. C<sub>C</sub>. Кол-во задач в наборе. 
* coros limit. C<sub>L</sub>. Ограничение по кол-ву одновременно выполняемых задач. Условное ограничение стратегии или исполнителя. По определению, не может быть больше общего кол-ва задач. 

### Гипотеза:
Некоторые стратегии будут эффективнее других при определенной комбинации параметров. 

### Возможные комбинации параметров
Перечислим все возможные комбинации отношений количественных параметров. Значения в таблице лишь означают порядок параметра.

| № | C<sub>C</sub> | C<sub>L</sub> | C<sub>A</sub> | Комментарий  |
|---|----|----|----|--------------|
| a |  1 |  1 |  1 | C<sub>C</sub> = C<sub>L</sub> = C<sub>A</sub> |
| b |  1 |  1 |  2 | C<sub>C</sub> = C<sub>L</sub> < C<sub>A</sub> |
| c |  2 |  1 |  1 | C<sub>L</sub> = C<sub>A</sub> < C<sub>C</sub> |
| d |  2 |  1 |  2 | C<sub>L</sub> < C<sub>C</sub> = C<sub>A</sub> |
| e |  2 |  2 |  1 | C<sub>A</sub> < C<sub>C</sub> = C<sub>L</sub> |
| f |  2 |  1 |  3 | C<sub>L</sub> < C<sub>C</sub> < C<sub>A</sub> |
| g |  3 |  1 |  2 | C<sub>L</sub> < C<sub>A</sub> < C<sub>C</sub> |
| h |  3 |  2 |  1 | C<sub>A</sub> < C<sub>L</sub> < C<sub>C</sub> |

> Вырожденные случаи не берем в обработку
> * C<sub>C</sub>=1 C<sub>L</sub>=2 C<sub>A</sub>=1, C<sub>L</sub> не может быть больше C<sub>C</sub>
> * C<sub>C</sub>=1 C<sub>L</sub>=2 C<sub>A</sub>=3, C<sub>L</sub> не может быть больше C<sub>C</sub>
> * C<sub>C</sub>=1 C<sub>L</sub>=3 C<sub>A</sub>=2, C<sub>L</sub> не может быть больше C<sub>C</sub>
> * C<sub>C</sub>=2 C<sub>L</sub>=3 C<sub>A</sub>=1, C<sub>L</sub> не может быть больше C<sub>C</sub>
> * C<sub>C</sub>=2 C<sub>L</sub>=2 C<sub>A</sub>=2, повторяет кейс C<sub>C</sub>=C<sub>L</sub>=C<sub>A</sub>

### Рассмтариваемые стратегии
* gather - запуск всех задач из набора в одном запуске `asyncio.gather`.
* chunked_gather - разделение задач по чанкам с C<sub>L</sub>-задач, каждый чанк синхронно запускается в `asyncio.gather`.
* sem_gather - модификация gather с семафором. В sem_gather передается весь набор задач. Семафор отсчитывает C<sub>L</sub> задач, которые могут быть обработанны одновременно, при завершении одной задачи семафор уменьшается, чтобы можно было взять еще одну задачу. 
* queue - Создается C<sub>L</sub> воркеров обрабатывающих очередь. Набор всех задач передается в эту очередь.

...

### Графики
#### case a
![case a](./random_/plots/composite_plots/7-7-7.png)

#### case b
![case b](./random_/plots/composite_plots/7-7-19.png)

#### case c
![case c](./random_/plots/composite_plots/19-7-7.png)

#### case d
![case d](./random_/plots/composite_plots/19-7-19.png)

#### case e
![case e](./random_/plots/composite_plots/19-19-7.png)

#### case f
![case f](./random_/plots/composite_plots/19-7-51.png)

#### case g
![case g](./random_/plots/composite_plots/51-7-19.png)

#### case h
![case h](./random_/plots/composite_plots/51-19-7.png)
